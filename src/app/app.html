<!-- NAVBAR -->
<nav class="topheader">
  <a routerLink="/" class="logo" aria-label="Inicio">
    <img height="60" width="60" src="assets/imagenes/HelpifyPNG.png" alt="Helpify" />
  </a>

  <!-- Bot√≥n men√∫ (m√≥vil) -->
  <button class="open-menu" aria-label="Abrir men√∫" (click)="toggleMenu()" *ngIf="!menuOpened">
    <img height="40" width="40" src="assets/imagenes/hamburguesa.png" alt="Abrir men√∫" />
  </button>
  <button class="close-menu" aria-label="Cerrar men√∫" (click)="toggleMenu()" *ngIf="menuOpened">
    <img height="40" width="40" src="assets/imagenes/pngwing.com (1).png" alt="Cerrar men√∫" />
  </button>

  <ul class="menu-horizontal" [class.menu_opened]="menuOpened" (click)="closeMenu()">
    <!-- HOME + PERFIL -->
    <li class="has-sub" routerLinkActive="active">
      <a [routerLink]="['/home']">HOME</a>
      <ul class="menu-vertical">
        <li>
          <a routerLink="/perfil" class="submenu-link perfil-item" (click)="irAPerfil($event)">PERFIL</a>
        </li>
      </ul>
    </li>

    <!-- COMUNIDAD + REPORTES: ocultar completamente si NO est√° autenticado -->
    <li class="has-sub" routerLinkActive="active" *ngIf="isAuthenticated">
      <a>COMUNIDAD</a>
      <ul class="menu-vertical">
        <!-- Ocultar para VOLUNTARIO -->
        <li *ngIf="!esVoluntario">
          <a routerLink="/proyectos-donaciones" class="submenu-link comunidad-item">REPORTE DE DONACIONES</a>
        </li>
        <!-- Ocultar para DONANTE -->
        <li *ngIf="!esDonante">
          <a routerLink="/proyectos-inscripciones" class="submenu-link comunidad-item">REPORTE DE INSCRIPCIONES</a>
        </li>
      </ul>
    </li>

    <!-- PROYECTOS-->
    <li class="has-sub" routerLinkActive="active" *ngIf="isAuthenticated">
      <a href="javascript:void(0)">PROYECTOS</a>
      <ul class="menu-vertical">
        <li><a routerLink="/proyectos">Listado de proyectos</a></li>

        <!-- Registros de proyecto: solo Admin -->
        <li *ngIf="esAdmin"><a routerLink="/proyectos/nuevo">Agregar un proyecto</a></li>

        <!-- Reportes estad√≠sticos: solo Admin -->
        <li *ngIf="esAdmin"><a routerLink="/reporte-universitarios">Reportes estad√≠sticos</a></li>
      </ul>
    </li>

    <!-- WISHLIST: ocultar si NO est√° autenticado o si es ADMIN -->
    <li *ngIf="isAuthenticated && !esAdmin"><a routerLink="/wishlist">WISHLIST</a></li>

    <!-- NOTIFICACIONES (rol sensible) -->
    <li class="has-sub" routerLinkActive="active" *ngIf="isAuthenticated">

      <!-- Donante / Voluntario ‚Üí acceso directo al listado -->
      <a *ngIf="!esAdmin" routerLink="/notificaciones">
        NOTIFICACIONES
      </a>

      <!-- Admin ‚Üí men√∫ desplegable -->
      <ng-container *ngIf="esAdmin">
        <a href="javascript:void(0)">NOTIFICACIONES</a>

        <ul class="menu-vertical">

          <!-- Listado -->
          <li>
            <a routerLink="/notificaciones" class="submenu-link">
              Listado de notificaciones
            </a>
          </li>

          <!-- Insertar nueva notificaci√≥n -->
          <li>
            <a routerLink="/notificaciones/nueva" class="submenu-link">
              Insertar notificaci√≥n
            </a>
          </li>

        </ul>
      </ng-container>

    </li>

    <!-- FOROS -->
    <li><li *ngIf="isAuthenticated"><a routerLink="/foros">FOROS</a></li>
  </ul>
  <div class="rol-info">
    <span class="rol-label">Rol:</span>
    <span class="rol-pill">{{ rolActual }}</span>
  </div>
</nav>

<!-- CONTENIDO -->
<main class="main-content">
  <router-outlet></router-outlet>
</main>

<!-- CONTENIDO -->
<main class="main-content">
  <router-outlet></router-outlet>
</main>

<!-- BOT√ìN + CHAT -->
<button class="chat-toggle" (click)="toggleChat()">
  üí¨
</button>

<div class="chat-floating" *ngIf="showChat">
  <app-chatbot></app-chatbot>
</div>

<!-- FOOTER -->
<footer class="custom-footer">
  <div class="footer-content">
    <div class="footer-row">
      <div class="col-left">
        <h4 class="footer-title">CONT√ÅCTANOS</h4>
        <a class="footer-mail" href="mailto:helpify@gmail.com">Helpify&#64;gmail.com</a>
        <a href="javascript:void(0)" class="footer-link" (click)="scrollToFaq()">PREGUNTAS FRECUENTES</a>
      </div>

      <nav class="col-center" aria-label="Enlaces legales">
        <a href="https://cdn.www.gob.pe/uploads/document/file/3510113/Anexo%20I%20DS%20N%20101-2022-PCM_.pdf.pdf?v=1660688658" target="_blank" class="footer-link">LIBRO DE RECLAMACIONES</a>
        <a href="https://proa.pe/terminos-ong" target="_blank" class="footer-link">T√âRMINOS Y CONDICIONES</a>
      </nav>

      <div class="col-right">
        <span class="social-title">ENCU√âNTRANOS EN</span>
        <div class="social-icons">
          <a href="https://www.tiktok.com" aria-label="TikTok" target="_blank"><img src="assets/imagenes/TikTok.png" alt="" /></a>
          <a href="https://www.facebook.com" aria-label="Facebook" target="_blank"><img src="assets/imagenes/Facebook.png" alt="" /></a>
          <a href="https://www.instagram.com" aria-label="Instagram" target="_blank"><img src="assets/imagenes/Instagram.png" alt="" /></a>
        </div>
      </div>
    </div>
  </div>
</footer>
