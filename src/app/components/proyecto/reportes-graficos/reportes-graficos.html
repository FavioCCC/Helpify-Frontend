<section class="reporte-universitarios">
  <div class="card-barras">
    <h1 class="titulo">REPORTE DE UNIVERSITARIOS POR PROYECTO</h1>

    <div *ngIf="error" class="msg-error">
      {{ error }}
    </div>

    <div class="chart-container" *ngIf="barras.length">
      <!-- Eje Y -->
      <div class="y-axis">
        <span class="y-label" *ngFor="let t of ticksY">
          {{ t }}
        </span>
      </div>

      <!-- Área del gráfico -->
      <div class="chart-area">
        <div class="chart-bars">
          <div
            class="bar"
            *ngFor="let b of barras"
            [style.height.%]="b.altura"
            [attr.title]="b.label + ': ' + b.valor"
          ></div>
        </div>

        <div class="chart-labels">
          <span class="x-label" *ngFor="let b of barras">
            {{ b.label }}
          </span>
        </div>
      </div>
    </div>

    <p *ngIf="!barras.length && !error" class="msg-vacio">
      No hay datos para mostrar en este reporte.
    </p>
  </div>
</section>

<!-- SEGUNDA SECCIÓN: PIE CHART -->
<section class="reporte-porcentaje" *ngIf="segmentosPie.length">


  <div class="pie-card">
    <h2 class="subtitulo">PORCENTAJE DE UNIVERSITARIOS POR PROYECTOS</h2>
    <div class="pie-frame">
      <div class="pie-chart" [style.background-image]="pieBackground"></div>
    </div>

    <ul class="pie-legend">
      <li *ngFor="let s of segmentosPie">
        <span class="color-box" [style.background-color]="s.color"></span>
        <span class="legend-text">
            {{ s.label }}: {{ s.porcentaje | number: '1.0-0' }}%
          </span>
      </li>
    </ul>
  </div>
</section>
